#!/usr/bin/env php
<?php
// ini_set('display_errors', TRUE);
define("DS", DIRECTORY_SEPARATOR);
define('SERVER_ROOT', __dir__ . DS);
define('CONFIG_FILE', 'config.xml');
define('CONFIG_DIRECTORY', SERVER_ROOT . '..' . DS . 'etc' . DS);
define('VIEW_DIRECTORY', SERVER_ROOT . '..' . DS . 'views' . DS);
define('VAR_DIRECTORY', SERVER_ROOT .'..' . DS . 'var' . DS );
define('LOGS_DIRECTORY', VAR_DIRECTORY . 'logs' . DS);
define('REMOTE_IP', "127.0.0.1");
define('MODULE_MAIN', "Main");
define('CTRL_MAIN', "Main");

require __DIR__ . '/../../vendor/autoload.php';
use Symfony\Component\Console\Application;
use App\Core\Logs\Logger;

try {
	$app = new Application("App Console", "0.1");

	// ... register commands
	$list_commands = [
		"App\Commands\SeedCommand",
	];
	foreach ($list_commands as $class) {
		if (class_exists($class)) {
			$app->add(new $class);
		}
	}

	$app->run();
} catch (Exception $e) {
    $errorString = "\n".$e->getTraceAsString();
    echo $errorString;
    Logger::error($errorString);
}

