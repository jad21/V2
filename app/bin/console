#!/usr/bin/env php
<?php

error_reporting(E_ALL);
// ini_set('display_errors', TRUE);
define("DS", DIRECTORY_SEPARATOR);
define('SERVER_ROOT', __dir__.DS);
define('CONFIG_FILE', 'config.xml');
define('CONFIG_DIRECTORY', SERVER_ROOT .'..' . DS . 'etc' . DS);
define('VIEW_DIRECTORY', SERVER_ROOT .'..' . DS . 'views' . DS);
define('LOGS_DIRECTORY', SERVER_ROOT .'..' . DS . 'var' . DS . 'logs' . DS);
define('REMOTE_IP', "127.0.0.1");
define('MODULE_MAIN', "Main");
define('CTRL_MAIN', "Main");

set_error_handler(function ($errno, $errstr, $errfile, $errline ,array $errcontex) {
    throw new ErrorException($errstr, 0, $errno, $errfile, $errline);
});

require __DIR__.'/../../vendor/autoload.php';

use App\Core\Logs\Logger;
use Symfony\Component\Console\Application;

try {
	
	$app = new Application("App Console","0.1");

	// ... register commands
	$app->add(new App\Commands\SeedCommand);
	$app->add(new App\Commands\SearchAWS);
	$app->add(new App\Commands\QueueAWS);
	$app->add(new App\Commands\MasivaAWS);
	$app->add(new App\Commands\MasivaML);

	$app->run();
} catch (ErrorException $e) {
	$body_error = $e->getTraceAsString();
	Logger::error($body_error);
}catch (FileNotFoundException $e){
	$body_error = $e->getTraceAsString();
	Logger::error($body_error);
}
